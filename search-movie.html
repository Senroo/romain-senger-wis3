<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
  #autocomplete {
  max-width: 100%;
  margin: 0 auto;
  width: 40%;
}

.autocomplete-result {
  border-top: 1px solid #eee;
  padding: 16px;
  background: white;
}

.wiki-title {
  font-size: 20px;
  margin-bottom: 8px;
}

.wiki-snippet {
  font-size: 14px;
  color: rgba(0, 0, 0, 0.54);
}
</style>
<body>
    <div id="autocomplete" class="autocomplete">
        <input class="autocomplete-input"
          placeholder="Cherche ton film"
          aria-label="Search Wikipedia"
        >
        <ul class="autocomplete-result-list"></ul>
</body>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.5/vue.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/@trevoreyre/autocomplete-js"></script>

<script>
  
  const Url = 'https://api.themoviedb.org/3/search/movie?api_key=b3c539b16fd5edd577e05da83944f388&language=fr'
    const params = '&query='

new Autocomplete('#autocomplete', {
  
  // Search function can return a promise
  // which resolves with an array of
  // results. In this case we're using
  // the Wikipedia search API.
  search: input => {
    const url = `${Url}${
      params
    }${encodeURI(input)}`

    return new Promise(resolve => {
      if (input.length < 3) {
        return resolve([])
      }

      fetch(url)
        .then(response => response.json())
        .then(data => {
          resolve(data.results)
        })
    })
  },
  
  // Control the rendering of result items.
  // Let's show the title and snippet
  // from the Wikipedia results
  renderResult: (results) => `
    <li ${results}>
      <div class="wiki-title">
        ${results.title}
      </div>
    </li>
  `,
  
  // Wikipedia returns a format like this:
  //
  // {
  //   pageid: 12345,
  //   title: 'Article title',
  //   ...
  // }
  // 
  // We want to display the title
  getResultValue: results => results.title,

  // Open the selected article in
  // a new window
  onSubmit: results => {
    window.open(`info-film.html?id=${
      encodeURI(results.id)
    }`)
  }
});
</script>

</html>